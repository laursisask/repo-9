"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("lodash/toPath"),e=require("@rjsf/utils"),t=require("ajv"),a=require("lodash/isObject");function o(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var n=o(r),i=o(t),s=o(a);function c(){return c=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},c.apply(this,arguments)}var u={errorDataPath:"property",allErrors:!0,multipleOfPrecision:8,schemaId:"auto",unknownFormats:"ignore"},d=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,f=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/,h=function(){function r(r){this.ajv=void 0,this.ajv=function(r,e,t){void 0===t&&(t={});var a=new i.default(c({},u,t));return a.addFormat("data-url",f),a.addFormat("color",d),Array.isArray(r)&&a.addMetaSchema(r),s.default(e)&&Object.keys(e).forEach((function(r){a.addFormat(r,e[r])})),a}(r.additionalMetaSchemas,r.customFormats,r.ajvOptionsOverrides)}var t=r.prototype;return t.toErrorSchema=function(r){var t=new e.ErrorSchemaBuilder;return r.length&&r.forEach((function(r){var e=r.message,a=n.default(r.property);a.length>0&&""===a[0]&&a.splice(0,1),e&&t.addErrors(e,a)})),t.ErrorSchema},t.toErrorList=function(r,t){var a=this;if(void 0===t&&(t=[]),!r)return[];var o=[];return e.ERRORS_KEY in r&&(o=o.concat(r.__errors.map((function(r){var e="."+t.join(".");return{property:e,message:r,stack:e+" "+r}})))),Object.keys(r).reduce((function(o,n){return n!==e.ERRORS_KEY&&(o=o.concat(a.toErrorList(r[n],[].concat(t,[n])))),o}),o)},t.createErrorHandler=function(r){var t=this,a={__errors:[],addError:function(r){this.__errors.push(r)}};if(e.isObject(r)){var o=r;return Object.keys(o).reduce((function(r,e){var a;return c({},r,((a={})[e]=t.createErrorHandler(o[e]),a))}),a)}return Array.isArray(r)?r.reduce((function(r,e,a){var o;return c({},r,((o={})[a]=t.createErrorHandler(e),o))}),a):a},t.unwrapErrorHandler=function(r){var t=this;return Object.keys(r).reduce((function(a,o){var n,i;return"addError"===o?a:c({},a,o===e.ERRORS_KEY?((i={})[o]=r[o],i):((n={})[o]=t.unwrapErrorHandler(r[o]),n))}),{})},t.transformRJSFValidationErrors=function(r){return void 0===r&&(r=[]),r.map((function(r){var e=r.message,t=r.schemaPath,a=""+r.dataPath;return{name:r.keyword,property:a,message:e,params:r.params,stack:(a+" "+e).trim(),schemaPath:t}}))},t.rawValidation=function(r,e){var t=void 0;try{this.ajv.validate(r,e)}catch(r){t=r}var a=this.ajv.errors||void 0;return this.ajv.errors=null,{errors:a,validationError:t}},t.validateFormData=function(r,t,a,o,n){var i=t,s=this.rawValidation(t,r),u=s.validationError,d=this.transformRJSFValidationErrors(s.errors),f=u&&u.message&&u.message.includes("no schema with key or ref ");f&&(d=[].concat(d,[{stack:u.message}])),"function"==typeof o&&(d=o(d,n));var h=this.toErrorSchema(d);if(f&&(h=c({},h,{$schema:{__errors:[u.message]}})),"function"!=typeof a)return{errors:d,errorSchema:h};var l=e.getDefaultFormState(this,t,r,i,!0),v=a(l,this.createErrorHandler(l),n),m=this.unwrapErrorHandler(v);return e.mergeValidationData(this,{errors:d,errorSchema:h},m)},t.withIdRefPrefixObject=function(r){for(var t in r){var a=r[t];r[t]=t===e.REF_KEY&&"string"==typeof a&&a.startsWith("#")?"__rjsf_rootSchema"+a:this.withIdRefPrefix(a)}return r},t.withIdRefPrefixArray=function(r){for(var e=0;e<r.length;e++)r[e]=this.withIdRefPrefix(r[e]);return r},t.isValid=function(r,e,t){try{return this.ajv.addSchema(t,"__rjsf_rootSchema").validate(this.withIdRefPrefix(r),e)}catch(r){return!1}finally{this.ajv.removeSchema("__rjsf_rootSchema")}},t.withIdRefPrefix=function(r){return r.constructor===Object?this.withIdRefPrefixObject(c({},r)):Array.isArray(r)?this.withIdRefPrefixArray([].concat(r)):r},r}();function l(r){return void 0===r&&(r={}),new h(r)}var v=l();exports.customizeValidator=l,exports.default=v;
//# sourceMappingURL=validator-ajv6.cjs.production.min.js.map
