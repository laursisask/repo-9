!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash-es/toPath"),require("@rjsf/utils"),require("ajv"),require("lodash-es/isObject")):"function"==typeof define&&define.amd?define(["exports","lodash-es/toPath","@rjsf/utils","ajv","lodash-es/isObject"],e):e((r="undefined"!=typeof globalThis?globalThis:r||self)["@rjsf/validator-ajv6"]={},r.toPath,r.utils,r.Ajv,r.isObject)}(this,(function(r,e,t,a,o){"use strict";function i(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var n=i(e),s=i(a),c=i(o);function u(){return u=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},u.apply(this,arguments)}var d={errorDataPath:"property",allErrors:!0,multipleOfPrecision:8,schemaId:"auto",unknownFormats:"ignore"},f=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,h=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/,l="__rjsf_rootSchema",v=function(){function r(r){this.ajv=void 0,this.ajv=function(r,e,t){void 0===t&&(t={});var a=new s.default(u({},d,t));return a.addFormat("data-url",h),a.addFormat("color",f),Array.isArray(r)&&a.addMetaSchema(r),c.default(e)&&Object.keys(e).forEach((function(r){a.addFormat(r,e[r])})),a}(r.additionalMetaSchemas,r.customFormats,r.ajvOptionsOverrides)}var e=r.prototype;return e.toErrorSchema=function(r){var e=new t.ErrorSchemaBuilder;return r.length&&r.forEach((function(r){var t=r.message,a=n.default(r.property);a.length>0&&""===a[0]&&a.splice(0,1),t&&e.addErrors(t,a)})),e.ErrorSchema},e.toErrorList=function(r,e){var a=this;if(void 0===e&&(e=[]),!r)return[];var o=[];return t.ERRORS_KEY in r&&(o=o.concat(r.__errors.map((function(r){var t="."+e.join(".");return{property:t,message:r,stack:t+" "+r}})))),Object.keys(r).reduce((function(o,i){return i!==t.ERRORS_KEY&&(o=o.concat(a.toErrorList(r[i],[].concat(e,[i])))),o}),o)},e.createErrorHandler=function(r){var e=this,a={__errors:[],addError:function(r){this.__errors.push(r)}};if(t.isObject(r)){var o=r;return Object.keys(o).reduce((function(r,t){var a;return u({},r,((a={})[t]=e.createErrorHandler(o[t]),a))}),a)}return Array.isArray(r)?r.reduce((function(r,t,a){var o;return u({},r,((o={})[a]=e.createErrorHandler(t),o))}),a):a},e.unwrapErrorHandler=function(r){var e=this;return Object.keys(r).reduce((function(a,o){var i,n;return"addError"===o?a:u({},a,o===t.ERRORS_KEY?((n={})[o]=r[o],n):((i={})[o]=e.unwrapErrorHandler(r[o]),i))}),{})},e.transformRJSFValidationErrors=function(r){return void 0===r&&(r=[]),r.map((function(r){var e=r.message,t=r.schemaPath,a=""+r.dataPath;return{name:r.keyword,property:a,message:e,params:r.params,stack:(a+" "+e).trim(),schemaPath:t}}))},e.rawValidation=function(r,e){var t=void 0;try{this.ajv.validate(r,e)}catch(r){t=r}var a=this.ajv.errors||void 0;return this.ajv.errors=null,{errors:a,validationError:t}},e.validateFormData=function(r,e,a,o,i){var n=e,s=this.rawValidation(e,r),c=s.validationError,d=this.transformRJSFValidationErrors(s.errors),f=c&&c.message&&c.message.includes("no schema with key or ref ");f&&(d=[].concat(d,[{stack:c.message}])),"function"==typeof o&&(d=o(d,i));var h=this.toErrorSchema(d);if(f&&(h=u({},h,{$schema:{__errors:[c.message]}})),"function"!=typeof a)return{errors:d,errorSchema:h};var l=t.getDefaultFormState(this,e,r,n,!0),v=a(l,this.createErrorHandler(l),i),m=this.unwrapErrorHandler(v);return t.mergeValidationData(this,{errors:d,errorSchema:h},m)},e.withIdRefPrefixObject=function(r){for(var e in r){var a=r[e];r[e]=e===t.REF_KEY&&"string"==typeof a&&a.startsWith("#")?l+a:this.withIdRefPrefix(a)}return r},e.withIdRefPrefixArray=function(r){for(var e=0;e<r.length;e++)r[e]=this.withIdRefPrefix(r[e]);return r},e.isValid=function(r,e,t){try{return this.ajv.addSchema(t,l).validate(this.withIdRefPrefix(r),e)}catch(r){return!1}finally{this.ajv.removeSchema(l)}},e.withIdRefPrefix=function(r){return r.constructor===Object?this.withIdRefPrefixObject(u({},r)):Array.isArray(r)?this.withIdRefPrefixArray([].concat(r)):r},r}();function m(r){return void 0===r&&(r={}),new v(r)}var p=m();r.customizeValidator=m,r.default=p,Object.defineProperty(r,"__esModule",{value:!0})}));
//# sourceMappingURL=validator-ajv6.umd.production.min.js.map
